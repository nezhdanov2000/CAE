# Weekly Schedule System - CAE

## Описание

Система расписания для CAE (College Administration Environment) предоставляет интерактивное недельное расписание с возможностью навигации между неделями.

## Функциональность

### Основные возможности:
- **Недельное расписание**: Отображение расписания с понедельника по пятницу
- **Временная шкала**: 8:00 - 17:00 с интервалами в 30 минут
- **Цветные блоки занятий**: Каждое занятие отображается как цветной прямоугольник
- **Информация о занятиях**: Название курса и количество кредитов
- **Навигация по неделям**: Кнопки "Предыдущая неделя" и "Следующая неделя"
- **Адаптивный дизайн**: Поддержка мобильных устройств

### Отображение занятий:
- Каждое занятие имеет уникальный цвет
- Размер блока соответствует длительности занятия
- При наведении показывается подробная информация
- Занятия не могут накладываться (одна аудитория)

## Структура файлов

```
CAE/
├── frontend/
│   └── common/
│       ├── schedule.html          # Основная страница расписания
│       └── dashboard.html         # Обновлена ссылка на расписание
├── backend/
│   └── common/
│       ├── schedule.php           # API для загрузки данных расписания
│       └── schedule_data.sql      # SQL-скрипт с реальными данными
└── SCHEDULE_README.md            # Этот файл
```

## База данных

Система использует структуру БД из `cae_structure.sql`:

### Основные таблицы:
- **`Course`** - названия курсов
- **`Tutor`** - преподаватели (имя, фамилия)
- **`Timeslot`** - временные слоты (дата, время начала/конца)
- **`Tutor_Creates`** - связь преподаватель-таймслот

### Примеры данных:
- **Basic Science** - John Smith - Monday 09:00-10:30
- **Mathematics** - Mary Johnson - Monday 11:00-12:30
- **English** - David Brown - Monday 14:00-15:30
- **Physics** - Sarah Wilson - Tuesday 08:30-10:00
- **Chemistry** - Michael Davis - Tuesday 10:15-11:45

## API Endpoints

### GET `/backend/common/schedule.php`
Загружает данные расписания для указанной недели.

**Параметры:**
- `week_start` (опционально): Дата начала недели (YYYY-MM-DD)
- `week_end` (опционально): Дата конца недели (YYYY-MM-DD)

**Ответ:**
```json
[
    {
        "id": 1,
        "day": 0,
        "start_time": "09:00",
        "end_time": "10:30",
        "course": "Basic Science",
        "course_name": "Basic Science",
        "tutor_name": "John Smith",
        "color": "#4a90e2"
    }
]
```

## Использование

1. **Доступ к расписанию**: Перейдите в меню "Schedule" из главной панели
2. **Навигация**: Используйте кнопки "Previous Week" и "Next Week" для перемещения между неделями
3. **Просмотр занятий**: Наведите курсор на блок занятия для получения подробной информации
4. **Адаптивность**: Система автоматически адаптируется под размер экрана

## Технические детали

### Frontend:
- HTML5 с семантической разметкой
- CSS3 с Flexbox и Grid для адаптивного дизайна
- JavaScript ES6+ для интерактивности
- Font Awesome для иконок

### Backend:
- PHP 7.4+ с PDO для работы с базой данных
- MySQL/MariaDB для хранения данных
- JSON API для обмена данными

### Безопасность:
- Проверка авторизации пользователя
- Защита от SQL-инъекций через подготовленные запросы
- Валидация входных данных

## Установка и настройка

1. Убедитесь, что XAMPP запущен (Apache + MySQL)
2. База данных `cae_database` должна существовать
3. Таблицы создаются автоматически при первом обращении
4. Демо-данные загружаются автоматически при первом запуске

### Устранение неполадок:

Если возникает ошибка 500 при загрузке расписания:

1. **Проверьте подключение к базе данных:**
   - Откройте: http://localhost/CAE/backend/common/test_db.php
   - Должно показать успешное подключение

2. **Отладочная проверка (без авторизации):**
   - Откройте: http://localhost/CAE/backend/common/debug_schedule.php
   - Проверит создание таблиц и данных

3. **Проверьте XAMPP:**
   - Убедитесь, что Apache и MySQL запущены
   - Проверьте логи ошибок в XAMPP Control Panel

4. **Проверьте пароль MySQL:**
   - Убедитесь, что пароль в файлах соответствует вашему MySQL
   - По умолчанию используется: `QscWdzEax753861942`

5. **Проверьте данные в базе:**
   - Откройте: http://localhost/CAE/backend/common/check_schedule_data.php
   - Покажет все записи в базе данных

6. **Ручная настройка базы данных:**
   - Откройте phpMyAdmin (http://localhost/phpmyadmin)
   - Убедитесь, что база данных `cae_database` существует

## Разработка

### Добавление новых занятий:
1. Вставьте данные в таблицу `schedule`
2. Система автоматически назначит цвет курсу
3. Занятия отобразятся в расписании

### Изменение временных интервалов:
Отредактируйте переменную `interval` в функции `initializeSchedule()` в файле `schedule.html`

### Изменение цветовой схемы:
Отредактируйте массив `colors` в функции `getColorForCourse()` в файле `schedule.php`

## Поддержка

Система расписания интегрирована в общую архитектуру CAE и использует существующие компоненты аутентификации и стилизации. 